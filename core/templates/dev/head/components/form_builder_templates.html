<script type="text/ng-template" id="schemaBasedEditor/entryPoint">
  <ng-form name="schemaForm">
    <schema-builder local-value="localValue" schema="definition" mode="mode">
    </schema-builder>
  </ng-form>

  <div ng-if="mode == $root.FORM_BUILDER_MODES.ENABLED">
    <button ng-click="submitValue(localValue)" class="btn btn-success" ng-disabled="schemaForm.$invalid">Submit</button>
    <button ng-click="cancelEdit()" class="btn btn-default">Cancel</button>
  </div>
</script>


<script type="text/ng-template" id="schemaBasedEditor/master">
  <schema-based-bool-editor ng-if="schema().type === 'bool'" local-value="$parent.localValue" mode="mode" allow-parameters="schema().allow_parameters">
  </schema-based-bool-editor>

  <schema-based-int-editor ng-if="schema().type === 'int'" local-value="$parent.localValue" mode="mode" allow-parameters="schema().allow_parameters">
  </schema-based-int-editor>

  <schema-based-float-editor ng-if="schema().type === 'float'" local-value="$parent.localValue" mode="mode" allow-parameters="schema().allow_parameters" post-normalizers="schema().post_normalizers">
  </schema-based-float-editor>

  <schema-based-unicode-editor ng-if="schema().type === 'unicode'" local-value="$parent.localValue" mode="mode" post-normalizers="schema().post_normalizers" ui-config="schema().ui_config">
  </schema-based-unicode-editor>

  <schema-based-html-editor ng-if="schema().type === 'html'" local-value="$parent.localValue" mode="mode">
  </schema-based-html-editor>

  <schema-based-list-editor ng-if="schema().type === 'list'" local-value="$parent.localValue" mode="mode" item-schema="schema().items" len="schema().len" ui-config="schema().ui_config">
  </schema-based-list-editor>

  <schema-based-dict-editor ng-if="schema().type === 'dict'" local-value="$parent.localValue" mode="mode" property-schemas="schema().properties">
  </schema-based-dict-editor>

  <schema-based-custom-editor ng-if="schema().type === 'custom'" obj-type="schema().obj_type" local-value="$parent.localValue" mode="mode">
  </schema-based-custom-editor>
</script>


<script type="text/ng-template" id="schemaBasedEditor/bool">
  <select class="form-control"
          ng-if="mode != $root.FORM_BUILDER_MODES.READONLY"
          ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"
          ng-model="$parent.localValue"
          ng-options="option.value as option.name for option in boolEditorOptions">
  </select>

  <span ng-if="mode === $root.FORM_BUILDER_MODES.READONLY">
    <span ng-if="!editAsParameter">
      <[localValue]>
    </span>
    <span class="label label-info" ng-if="editAsParameter">
      <[localValue]>
    </span>
  </span>
</script>


<script type="text/ng-template" id="schemaBasedEditor/int">
  <span ng-if="mode != $root.FORM_BUILDER_MODES.READONLY">
    <div class="input-group">
      <input ng-if="!editAsParameter" type="number" ng-model="$parent.$parent.localValue" class="form-control" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED">
      <select class="form-control" ng-if="editAsParameter" ng-model="$parent.$parent.localValue" ng-options="option.value as option.name for option in paramNameOptions" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"></select>

      <span class="input-group-btn" ng-if="allowParameters() && paramNameOptions.length">
        <button ng-if="!editAsParameter" type="button" class="btn btn-default" ng-click="toggleEditMode()" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"><b>P</b></button>
        <button ng-if="editAsParameter" type="button" class="btn btn-default" ng-click="toggleEditMode()" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"><del><b>P</b></del></button>
      </span>
    </div>
  </span>

  <span ng-if="mode == $root.FORM_BUILDER_MODES.READONLY">
    <span ng-if="!editAsParameter">
      <[localValue]>
    </span>
    <span class="label label-info" ng-if="editAsParameter">
      <[localValue]>
    </span>
  </span>
</script>


<script type="text/ng-template" id="schemaBasedEditor/float">
  <span ng-if="mode != $root.FORM_BUILDER_MODES.READONLY">
    <div class="input-group">
      <input ng-if="!editAsParameter" type="text" ng-model="$parent.$parent.localValue" class="form-control" post-normalizers="postNormalizers()" validate-with-post-normalizers add-float-validation ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED">
      <select class="form-control" ng-if="editAsParameter" ng-model="$parent.$parent.localValue" ng-options="option.value as option.name for option in paramNameOptions" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"></select>

      <span class="input-group-btn" ng-if="allowParameters() && paramNameOptions.length">
        <button ng-if="!editAsParameter" type="button" class="btn btn-default" ng-click="toggleEditMode()" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"><b>P</b></button>
        <button ng-if="editAsParameter" type="button" class="btn btn-default" ng-click="toggleEditMode()" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED"><del><b>P</b></del></button>
      </span>
    </div>
  </span>

  <span ng-if="mode == $root.FORM_BUILDER_MODES.READONLY">
    <span ng-if="!editAsParameter">
      <[localValue]>
    </span>
    <span class="label label-info" ng-if="editAsParameter">
      <[localValue]>
    </span>
  </span>
</script>


<script type="text/ng-template" id="schemaBasedEditor/unicode">
  <span ng-if="mode == $root.FORM_BUILDER_MODES.ENABLED">
    <span ng-if="doUnicodeParamsExist">
      <unicode-with-parameters-editor local-value="$parent.$parent.localValue" allowed-parameter-names="allowedParameterNames" mode="mode">
      </unicode-with-parameters-editor>
    </span>
    <span ng-if="!doUnicodeParamsExist">
      <textarea ng-if="getRows()" rows="<[getRows()]>" ng-model="$parent.$parent.localValue" class="form-control" validate-with-post-normalizers post-normalizers="postNormalizers()"></textarea>

      <input ng-if="!getRows()" type="text" ng-model="$parent.$parent.localValue" class="form-control" validate-with-post-normalizers post-normalizers="postNormalizers()">
    </span>
  </span>

  <span ng-if="mode != $root.FORM_BUILDER_MODES.ENABLED"
        ng-class="{'oppia-disabled-contenteditable': mode == $root.FORM_BUILDER_MODES.DISABLED}"
        ng-bind-html="getDisplayedValue()">
  </span>
</script>


<script type="text/ng-template" id="schemaBasedEditor/html">
  <rich-text-editor ng-if="mode == $root.FORM_BUILDER_MODES.ENABLED" html-content="$parent.localValue"></rich-text-editor>
  <span ng-if="mode != $root.FORM_BUILDER_MODES.ENABLED"
        ng-class="{'oppia-disabled-contenteditable': mode == $root.FORM_BUILDER_MODES.DISABLED}"
        ng-bind-html="localValue">
  </span>
</script>


<script type="text/ng-template" id="schemaBasedEditor/dict">
  <form role="form">
    <div ng-repeat="property in propertySchemas()">
      <div class="form-group">
        <!-- TODO(sll): Add a 'for' attribute to the label tag. -->
        <label><[getHumanReadablePropertyDescription(property)]></label>
        <div>
          <schema-builder schema="property.schema" mode="mode" local-value="localValue[property.name]">
          </schema-builder>
        </div>
      </div>
    </div>
  </form>
</script>


<script type="text/ng-template" id="schemaBasedEditor/list">
  <table class="table">
    <tr ng-repeat="item in localValue track by $index">
      <td>
        <schema-builder schema="itemSchema()" mode="mode" local-value="localValue[$index]">
        </schema-builder>
      </td>
      <td ng-if="mode != $root.FORM_BUILDER_MODES.READONLY && !len">
        <button class="btn btn-default btn-xs" type="button" ng-click="deleteElement($index)" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED">
          <span class="glyphicon glyphicon-remove" title="Delete item">
          </span>
        </button>
      </td>
    </tr>
  </table>

  <button ng-if="mode != $root.FORM_BUILDER_MODES.READONLY && !len" type="button" class="btn btn-default" ng-click="addElement()" ng-disabled="mode == $root.FORM_BUILDER_MODES.DISABLED">
    <[addElementText]>
  </button>
</script>


<script type="text/ng-template" id="schemaBasedEditor/custom">
  <object-editor obj-type="<[objType]>" value="localValue" always-editable="true">
  </object-editor>
</script>


<script type="text/ng-template" id="modals/editParamName">
  <div class="modal-header">
    <h3>Edit parameter name</h3>
  </div>

  <div class="modal-body">
    <strong>Parameter name</strong>
    <select class="form-control" ng-model="currentParamName" ng-options="option.value as option.name for option in paramOptions"></select>
  </div>

  <div class="modal-footer">
    <input type="submit" class="btn btn-default" value="Cancel" ng-click="cancel()">
    <input type="submit" class="btn btn-success" value="Done" ng-click="save(currentParamName)" ng-disabled="!currentParamName">
  </div>
</script>
