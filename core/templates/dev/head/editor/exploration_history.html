<div ng-controller="ExplorationHistory">

  <h4>Version History</h4>

  <div ng-hide="explorationSnapshots" class="oppia-align-center">
    Loading
    <span class="oppia-loading-dot-one">.</span>
    <span class="oppia-loading-dot-two">.</span>
    <span class="oppia-loading-dot-three">.</span>
  </div>

  <div ng-repeat="snapshot in explorationSnapshots">
    <input type="radio" name="compareVer1" ng-model="compareVersion.v1" ng-value="snapshot.versionNumber">
    <input type="radio" name="compareVer2" ng-model="compareVersion.v2" ng-value="snapshot.versionNumber">
    [<[snapshot.versionNumber]>]
    <strong><[snapshot.committerId]></strong>
    <[snapshot.commitMessage]>
    <span class="pull-right">
      <em><[snapshot.createdOn]></em>
      <span ng-if="snapshot.versionNumber !== currentVersion && editabilityService.isEditable()">
        | <a href="#" ng-click="showRevertExplorationModal(snapshot.versionNumber)">Revert</a>
      </span>
      <span>
        | <a href="#" ng-click="downloadExplorationWithVersion(snapshot.versionNumber)" title="Download exploration as a zip file.">Download</a>
      </span>
    </span>
  </div>

  <p>
    <button class="btn btn-default" ng-click="compareExplorations()">Compare selected revisions</button>
  </p>

  <div ng-hide="hideCodemirror">
    <table class="table">
        <td style="width:50%">
          <div>
            <strong>Revision #<[compareSnapshot.v1.versionNumber]></strong>
             by
            <strong><[compareSnapshot.v1.committerId]></strong>
             on
            <strong><[compareSnapshot.v1.createdOn]></strong>
          </div>
          <[compareSnapshot.v1.commitMessage]>
        </td>
        <td style="width:50%">
          <div>
            <strong>Revision #<[compareSnapshot.v2.versionNumber]></strong>
             by
            <strong><[compareSnapshot.v2.committerId]></strong>
             on
            <strong><[compareSnapshot.v2.createdOn]></strong>
          </div>
          <[compareSnapshot.v2.commitMessage]>
        </td>
    </table>
    <codemirror-mergeview codemirror-mergeview-options="CODEMIRROR_MERGEVIEW_OPTIONS" left-value="yamlStrV1" right-value="yamlStrV2"></codemirror-mergeview><br>
  </div>

  <script type="text/ng-template" id="modals/revertExploration">
    <div class="modal-header">
      <h3>Revert Exploration</h3>
    </div>

    <div class="modal-body">
      <p>
        You are about to revert this exploration to version <[version]>. All changes made since that older version will be retracted.
      </p>
      <p>
        Before reverting, you can preview the exploration you are reverting to by following <a href="/explore/<[explorationId]>?v=<[version]>" target="_blank">this link</a>. (It opens in a new window.)
      </p>
      <p>
        Are you sure you want to revert this exploration to version <[version]>?
      </p>
    </div>

    <div class="modal-footer">
      <button class="btn btn-default" ng-click="revert()">Revert</button>
      <button class="btn btn-default" ng-click="cancel()">Cancel</button>
    </div>
  </script>
</div>