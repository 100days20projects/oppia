<div ng-controller="ExplorationSettings">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <h4>General</h4>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-8 col-md-8 col-sm-8">
          <div role="form" class="form-horizontal">
            <div class="form-group">
              <label for="explorationTitle" class="col-lg-2 col-md-2 col-sm-2">Title</label>
              <div class="col-lg-10 col-md-10 col-sm-10">
                <input id="explorationTitle" type="text" class="form-control" ng-model="explorationTitleService.displayed" id="explorationTitle" ng-blur="saveExplorationTitle()">
              </div>
            </div>
            <div class="form-group">
              <label for="explorationCategory" class="col-lg-2 col-md-2 col-sm-2">Category</label>
              <div class="col-lg-10 col-md-10 col-sm-10">
                <input id="explorationCategory" type="text" class="form-control" ng-model="explorationCategoryService.displayed" ng-blur="saveExplorationCategory()">
              </div>
            </div>
            <div class="form-group">
              <label for="explorationObjective" class="col-lg-2 col-md-2 col-sm-2">Objective</label>
              <div class="col-lg-10 col-md-10 col-sm-10">
                <div class="input-group">
                  <span class="input-group-addon">This exploration helps learners to</span>
                  <input id="explorationObjective" type="text" class="form-control" ng-model="explorationObjectiveService.displayed" ng-blur="saveExplorationObjective()" placeholder="learn how to multiply two numbers" required>
                  <span class="input-group-addon">.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <h4>Roles</h4>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-6">
      <div ng-show="explorationRightsService.ownerNames.length > 0 && !explorationRightsService.isCloned()">
        <strong>Managers</strong>
        <ul>
          <li ng-repeat="ownerName in explorationRightsService.ownerNames track by $index">
            <[ownerName]>
          </li>
        </ul>
      </div>

      <div ng-show="explorationRightsService.editorNames.length > 0 && !explorationRightsService.isCloned()">
        <strong>Collaborators</strong>
        <ul>
          <li ng-repeat="editorName in explorationRightsService.editorNames track by $index">
            <[editorName]>
          </li>
        </ul>
      </div>

      <div ng-show="explorationRightsService.viewerNames.length > 0 && !explorationRightsService.isCloned()">
        <strong>Playtesters</strong>
        <ul>
          <li ng-repeat="viewerName in explorationRightsService.viewerNames track by $index">
            <[viewerName]>
          </li>
        </ul>
      </div>

      {% if can_modify_roles %}
        <div ng-hide="activeInputData.name == 'explorationMetadata.editRoles'">
          <button type="button" class="btn btn-default" ng-click="openEditRolesForm()">
            Edit Roles
          </button>
        </div>

        <div ng-show="activeInputData.name == 'explorationMetadata.editRoles'">
          <strong>Add or Change Role</strong>
          <br><br>
          <form ng-submit="editRole(newMemberEmail, newMemberRole.value)">
            Email: <input type="text" ng-model="newMemberEmail"
                   placeholder="Email address">
            <br>
            Role: <select ng-model="newMemberRole" ng-options="r.name for r in ROLES" style="width: 250px;">
            </select>
            <br>
            <em>Note that managers also have the permissions of collaborators, and collaborators also have the permissions of viewers. Please note that assigning roles is irreversible (though you can always assign somebody to a higher role).</em>
            <br>
            <input type="submit" value="Save">
            <button type="button" class="btn btn-default" ng-click="closeEditRolesForm()"
              ng-show="activeInputData.name == 'explorationMetadata.editRoles'">
              Cancel
            </button>
          </form>
        </div>
      {% endif %}
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <h4>Controls</h4>

      {% if can_publicize %}
        <span ng-show="explorationRightsService.isPublic()" class="oppia-exploration-ctrl">
          <button type="button" class="btn btn-default" ng-click="publicizeExploration()" ng-disabled="isExplorationLockedForEditing()">
            Move out of beta
            <span ng-if="currentUserIsAdmin">
              (as admin)
            </span>
            <span ng-if="!currentUserIsAdmin && currentUserIsModerator">
              (as moderator)
            </span>
          </button>
        </span>
      {% endif %}

      {% if can_unpublicize %}
        <span ng-show="explorationRightsService.isPublicized()" class="oppia-exploration-ctrl">
          <button type="button" class="btn btn-default" ng-click="unpublicizeExploration()" ng-disabled="isExplorationLockedForEditing()">
            Move back into beta
            <span ng-if="currentUserIsAdmin">
              (as admin)
            </span>
            <span ng-if="!currentUserIsAdmin && currentUserIsModerator">
              (as moderator)
            </span>
          </button>
        </span>
      {% endif %}

      {% if can_publish %}
        <span ng-show="explorationRightsService.isPrivate()" class="oppia-exploration-ctrl">
          <button type="button" class="btn btn-success" ng-click="showPublishExplorationModal()" ng-disabled="isExplorationLockedForEditing()">
            Publish Exploration
          </button>
          <img class="oppia-help" src="/images/help.png"
               tooltip="Click this button to publish your exploration in the gallery, so that others can read it."
               tooltip-placement="bottom">
        </span>
      {% endif %}

      {% if can_unpublish %}
        <span ng-show="explorationRightsService.isPublic()" class="oppia-exploration-ctrl">
          <button type="button" class="btn btn-default" ng-click="unpublishExploration()" ng-disabled="isExplorationLockedForEditing()">
            Unpublish
            <span ng-if="currentUserIsAdmin">
              (as admin)
            </span>
            <span ng-if="!currentUserIsAdmin && currentUserIsModerator">
              (as moderator)
            </span>
          </button>
        </span>
      {% endif %}

      {% if can_release_ownership %}
        <span ng-hide="explorationRightsService.isCommunityOwned()" class="oppia-exploration-ctrl">
          <button type="button" class="btn btn-default" ng-click="showTransferExplorationOwnershipModal()" ng-disabled="isExplorationLockedForEditing()">
            Transfer ownership to the community
          </button>
          <img class="oppia-help" src="/images/help.png"
               tooltip="Click this button to transfer ownership of this exploration to the community."
               tooltip-placement="bottom">
        </span>
      {% endif %}

      <button type="button" class="btn btn-default oppia-exploration-ctrl" ng-click="downloadExploration()"
         title="Download exploration as a zip file.">
        Download exploration as a zip file
      </a>

      <button type="button" ng-if="explorationRightsService.isPrivate()"
              class="btn btn-danger oppia-exploration-ctrl"
              ng-click="deleteExploration('')"
              title="Delete this exploration">
        Delete Exploration
      </button>

      <span ng-if="explorationRightsService.isPublic() && (currentUserIsAdmin || currentUserIsModerator)" class="oppia-exploration-ctrl">
        <button type="button"
                class="btn btn-danger"
                ng-click="currentUserIsAdmin ? deleteExploration('admin') : deleteExploration('moderator')">
          Delete Exploration
          <span ng-if="currentUserIsAdmin">
            (as admin)
          </span>
          <span ng-if="!currentUserIsAdmin && currentUserIsModerator">
            (as moderator)
          </span>
        </button>
      </span>
    </div>
  </div>

  <hr>

  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <h4>Parameters</h4>
    </div>

    <div class="col-lg-6 col-md-6 col-sm-6">
      <h5>Parameters used in this exploration</h5>
      <div ng-show="isEmpty(paramSpecs)">
        <em>No parameters used.</em>
      </div>
      <ol ng-show="!isEmpty(paramSpecs)">
        <li ng-repeat="(paramName, paramSpecValue) in paramSpecs">
          <b><[paramName]></b> (<[paramSpecValue.obj_type]>)
        </li>
      </ol>
    </div>

    <div class="col-lg-6 col-md-6 col-sm-6">
      <h5>
        Parameters initialized at start of exploration
        <img class="oppia-help" src="/images/help.png"
             tooltip="This allows you to initialize the values of a learner's parameters before the learner begins the exploration."
             tooltip-placement="right">
      </h5>

      <param-change-editor param-changes="explorationParamChanges"
                           param-specs="paramSpecs"
                           save-param-changes="saveExplorationParamChanges"
                           add-exploration-param-spec="addExplorationParamSpec">
      </param-change-editor>
    </div>
  </div>
</div>
