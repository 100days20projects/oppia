<div class="classifier" ng-show="classifier == 'numeric'" ng-controller="NumericClassifierEditor">

  <div ng-repeat="action in optionalActions" class="category-block">
    <a class="delete-button" ng-click="deleteCategory($index)" ng-show="states[stateId]['dests'][$index].category != 'All other inputs'">
      &times;
    </a>

    <form ng-submit="saveCategoryName($index)"
          ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category')">
      Answer:
      <span ng-class="getCategoryClass(states[stateId]['dests'][$index].category)"
            ng-hide="currentActiveInput == classifier + '.' + $index + '.category'">
        <[states[stateId]['dests'][$index].category]>
      </span>
      <span ng-show="currentActiveInput == classifier + '.' + $index + '.category'">
        <input type="text" ng-model="states[stateId]['dests'][$index].tempCategoryName" autofocus required>
        <a class="char-button" ng-click="addChar('±', $index)">±</a>
        <a class="char-button" ng-click="addChar('≤', $index)">≤</a>
        <a class="char-button" ng-click="addChar('≥', $index)">≥</a>
        <input type="submit" value="Save">
      </span>
    </form>

    <span class="dest-name"
          ng-hide="currentActiveInput == classifier + '.' + $index + '.dest'"
          ng-click="initializeNewActiveInput(classifier + '.' + $index + '.dest')">
      <[getDestDescription(states[stateId]['dests'][$index].dest)]>
    </span>
    <span ng-show="currentActiveInput == classifier + '.' + $index + '.dest'">
      <form ng-submit="saveDest($index, newNumericDestData)">
        Destination:
        <input type="text" size="40" list="destinations" ng-model="newNumericDestData" placeholder="Type name of state, or '[Q' for questions" autofocus required>
        <datalist id="destinations">
          <option ng-repeat="(id, properties) in states" value="<[properties.desc]>"></option>
          <option ng-repeat="(id, properties) in questions" value="[Question] <[properties.desc]>"></option>
          <option value="END"></option>
        </datalist>
        <button type="button" ng-click="saveDest($index, newNumericDestData)">Save</button>
      </form>
    </span>

    <p ng-click="showEditorModal('text', $index)">
      <span class="feedback-name">Feedback:</span>
      <span ng-click="showEditorModal('text', $index)" ng-hide="action.text">[Add feedback]</span>
      <span ng-show="action.text" ng-bind-html="action.text | truncate"></span>
    </p>

    <p>
      <span>Metrics:</span>
      <span ng-repeat="metric in action.metrics">
        <span ng-click="editMetric($parent.$index, metric.key, metric.value)">
          <[getMetricDescription(metric.key, metric.value)]>,
        </span>
      </span>
      <span ng-click="initializeMetricAdder($index)"
            ng-hide="currentActiveInput == classifier + '.' + $index + '.metrics.add' ||
                     currentActiveInput == classifier + '.' + $index + '.metrics.edit'">
        <a ng-hide="action.metrics">[Add metrics]</a>
        <a ng-show="action.metrics">[add more...]</a>
      </span>
      <span ng-show="currentActiveInput == classifier + '.' + $index + '.metrics.add'">
        <input type="text" ng-model="newMetricKey">
        <input type="number" ng-model="newMetricValue">
        <button type="button" ng-click="addMetric($index, newMetricKey, newMetricValue)">+</button>
        <button type="button" ng-click="clearActiveInputs()">Cancel</button>
      </span>
      <div ng-show="currentActiveInput == classifier + '.' + $index + '.metrics.edit'">
        <form ng-submit="saveMetric($index, newMetricKey, newMetricValue)">
          New value for change in <[newMetricKey]>:
          <input type="number" ng-model="newMetricValue" autofocus>
          <input type="submit" value="Save">
        </form>
      </div>
    </p>
  </div>

  <br>
  <button type="button" class="add-button" ng-click="initializeNewActiveInput(classifier + '.dummy.category')">Add new answer category</button>
  <br><br>
  <div class="category-block" ng-show="currentActiveInput == classifier + '.dummy.category'">
    <a class="delete-button" ng-click="hideDummyCategory()">&times;</a>

    <form ng-submit="testNewDummyName()">
      Answer:
      <input type="text" ng-model="newDummyCategoryName" placeholder="Add Answer Category" autofocus required>
      <a class="char-button" ng-click="addChar('±', -1)">±</a>
      <a class="char-button" ng-click="addChar('≤', -1)">≤</a>
      <a class="char-button" ng-click="addChar('≥', -1)">≥</a>
      <input type="submit" value="Submit">
    </form>
    <div class="placeholder">
      Examples: 2, 2.5 ± 0.5, ≥ 3, ≤ -0.3
    </div>
  </div>

  <div ng-show="hasUnsavedChanges">
    <button type="button" id="saveState" ng-click="saveState()" class="commit-button">Save</button>
    <div class="loading" ng-show="saveStateLoading"></div>
  </div>
</div>
