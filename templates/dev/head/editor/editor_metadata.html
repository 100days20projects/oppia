<div class="row-fluid">
  <div class="span6">
    <div>
      <strong>Title</strong>: <input type="text" ng-model="explorationTitle" ng-model-onblur>
      <br>
      <strong>Category</strong>: <input type="text" ng-model="explorationCategory" ng-model-onblur>
    </div>
  
    <div>
      <strong>Cover image</strong> (for the <a href="/gallery">Gallery</a>):
  
      <span ui-if="explorationImageId">
        <img class="oppia-small-image" ng-src="/imagehandler/<[explorationImageId]>">
        <button type="button" class="btn" ng-click="deleteExplorationImage()"
                title="Delete this image">
          <i class="icon-trash"></i>
        </button>
      </span>
      <div ui-if="!explorationImageId">
        <em>No image supplied.</em>

        <button type="button" ng-click="openAddExplorationImageForm()"
                ng-hide="activeInputData.name == 'explorationMetadata.addNewImage'">
          Add Image
        </button>

        <div ng-show="activeInputData.name == 'explorationMetadata.addNewImage'">
          <form id="newImageForm">
            <input type="file" id="newImage" name="newImage" image-upload="true">
            <br><br>
            <button type="button" ng-click="saveExplorationImage()">
              Save
            </button>
            <button type="button" ng-click="closeAddExplorationImageForm()">
              Cancel
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <div class="span6">
    <div ng-show="explorationEditors">
      <strong>Collaborator List</strong>
      <span ng-show="currentUser == explorationEditors[0]">
        <button type="button" ng-click="openAddNewEditorForm()"
                ng-hide="activeInputData.name == 'explorationMetadata.addNewEditor'">
          Add New
        </button>
      </span>
  
      <ul>
        <li ng-repeat="editor in explorationEditors">
          <span ng-show="$index == 0">
            <em><[editor]></em>
          </span>
          <span ng-hide="$index == 0">
            <[editor]>
          </span>
        </li>
      </ul>
  
      <div ng-show="currentUser == explorationEditors[0]">  
        <form ng-show="activeInputData.name == 'explorationMetadata.addNewEditor'"
              ng-submit="addNewEditor(newEditorEmail)">
          <input type="text" ng-model="newEditorEmail"
                 placeholder="New editor's email address">
          <input type="submit" value="Add Editor">
          <button type="button" ng-click="closeAddNewEditorForm()"
            ng-show="activeInputData.name == 'explorationMetadata.addNewEditor'">
            Cancel
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<br>

<div ng-show="stats.numVisits > 0">
  <strong>Completion rate</strong>
  <table width="200" style="border: 1px solid black;">
    <tr height="20">
      <td style="background-color:green;" width="<[stats.numCompletions* 200.0 / stats.numVisits]>">
      </td>
      <td style="background-color:firebrick;" width="<[200 - (stats.numCompletions * 200.0 / stats.numVisits)]>"></td>
    </tr>
  </table>
  <br>
  <table>
    <tr height="15">
      <td width="20" style="background-color: green;"></td>
      <td>&nbsp; Number of completions: <[stats.numCompletions]></td>
    </tr>
    <tr>
      <td width="20" style="background-color: firebrick;"></td>
      <td>&nbsp; Number of non-completions: <[stats.numVisits - stats.numCompletions]></td>
    </tr>
  </table>

  <br><br>

  <table>
    <tr>
      <th class="oppia-stats-table">State name</th>
      <th class="oppia-stats-table">Times hit</th>
      <th class="oppia-stats-table">Answers in the default category</th>
    </tr>

    <tr ng-repeat="(state, stateData) in stats.stateStats | orderBy:'count':true">
      <td class="oppia-stats-table">
        <a href="/create/<[explorationId]>#/gui/<[state]>">
          <[stateData.name]>
        </a>
      </td>
      <td class="oppia-stats-table">
        <[stateData.count]>
      </td>
      <td class="oppia-stats-table">
        <div ng-repeat="answer in stateData.answers">
          <[answer[0]]>
          (<em><[answer[1]]> time<span ng-show="answer[1] > 1">s</span></em>)
        </div>
      </td>
    </tr>
  </table>
</div>

<div ng-hide="stats.numVisits > 0">
  <em>
    This exploration has not been viewed by readers yet, so there are no
    statistics to display.
  </em>
</div>
