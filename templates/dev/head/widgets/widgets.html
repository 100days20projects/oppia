{% extends "base.html" %}

{% block content %}
<div ng-controller="Widgets">
  <ul class="thumbnails">
    <!-- placeholder for real data on explorations -->
    <li ng-repeat="widget in widgets" class="span3">
      <div class="thumbnail">
        {% if not iframed %}
          <h5><[widget.name]></h5>
        {% endif %}
        <iframe id="widget-<[$index]>" src="" width="100%"></iframe>
        <center>
          {% if iframed %}
            <button ng-click="selectWidget(widget)">
              <[widget.name]>
            </button>
          {% endif %}
        </center>
      </div>
    </li>
  </ul>

  {% if not iframed %}
    Add a new widget:
    <form name="addWidget" ng-hide="currentActiveInput == 'addWidget'" ng-submit="createNewWidget()">
      <input type="text" ng-model="newWidgetName">
      <input type="submit" value="Create Widget">
    </form>

    <div ng-show="currentActiveInput == 'addWidget'">
      <h4>Add code for a new widget
        <button type="button" ng-click="clearActiveInputs()">
          Cancel
        </button>
      </h4>

      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#code">Code</a></li>
        <li><a data-toggle="tab" href="#preview">Preview</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="code">
          Add code for a widget:
          <textarea class="oppia-code" ng-model="widgetCode" rows="10">
          </textarea>
          <button type="button" ng-click="saveWidget(widgetCode)">
            Save and Preview
          </button>
        </div>
        <div class="tab-pane" id="preview">
          <iframe id="widgetPreview<[$index]>" width="100%" frameborder="0"></iframe>
        </div>
      </div>
    </div>

   </div>
  {% endif %}
</div>
{% endblock %}
