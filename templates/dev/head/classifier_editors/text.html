<div class="classifier" ng-show="classifier=='text'" ng-controller="TextClassifierEditor">

  <div ng-repeat="action in states[stateId].dests" class="oppia-category-block">
    <a class="close" ng-click="deleteCategory($index)" ng-show="states[stateId]['dests'][$index].category != 'Default'">
      &times;
    </a>

    <form ng-submit="saveCategoryName($index, newTmpCategory, newTmpType)">
      <span ng-class="getCategoryClass(states[stateId]['dests'][$index].category)"
            ng-hide="activeInputData.name == classifier + '.' + $index + '.category'"
            ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category')">
        <[states[stateId]['dests'][$index].category]>
      </span>
      <span ng-show="activeInputData.name == classifier + '.' + $index +
        '.category'">
        <select ng-model="newTmpType" required>
          <option ng-selected="states[stateId]['dests'][$index].category.indexOf('Answer contains') == 0">
            Answer contains
          </option>
          <option ng-selected="states[stateId]['dests'][$index].category.indexOf('Answer does not contain') == 0">
            Answer does not contain
          </option>
        </select>
        <input type="text" ng-model="newTmpCategory" placeholder="Add text" autofocus required>
        <input type="submit" value="Save">
        <button type="button" ng-click="hideCategoryInput()">Cancel</button>
      </span>
    </form>

    <span class="oppia-editable-name"
          ng-hide="activeInputData.name == classifier + '.' + $index + '.dest'"
          ng-click="initializeNewActiveInput(classifier + '.' + $index + '.dest')">
      <[getDestDescription(states[stateId]['dests'][$index].dest)]>
    </span>
    <span ng-show="activeInputData.name == classifier + '.' + $index + '.dest'">
      <form ng-submit="saveDest($index, newTextDestData)">
        Destination:
        <input type="text" size="40" list="destinations" ng-model="newTextDestData" placeholder="Type name of state, or '[Q' for questions" autofocus required>
        <datalist id="destinations">
          <option ng-repeat="(id, properties) in states" value="<[properties.desc]>"></option>
          <option ng-repeat="(id, properties) in questions" value="[Question] <[properties.desc]>"></option>
          <option value="END"></option>
        </datalist>
        <button type="button" ng-click="saveDest($index, newTextDestData)">Save</button>
      </form>
    </span>

    <p ng-click="showFeedbackEditor(classifier + '.' + $index + '.text', $index)">
      <span class="oppia-editable-name">Feedback:</span>
      <span ng-hide="action.text">[Add feedback]</span>
      <span ng-show="action.text" ng-bind-html="action.text | truncate"></span>

      <div id="textInput" ng-show="activeInputData.name == classifier + '.' + $index + '.text'">
        <label for="textData">
          <h5>In response to the reader's answer, display the text:</h5>
        </label>
        <textarea rows="10" cols="50" ng-model="textData" id="textData"></textarea>
        <p>
          <button ng-click="saveText(textData, $index)">Save</button>
        </p>
      </div>
    </p>
  </div>

  <br>
  <button type="button" class="add-button" ng-click="initializeNewActiveInput(classifier + '.dummy.category')">Add new answer</button>
  <br><br>
  <div class="oppia-category-block" ng-show="activeInputData.name == classifier + '.dummy.category'">
    <a class="close" ng-click="hideCategoryInput()">&times;</a>
    <form ng-submit="addCategory(newTmpCategory, newTmpType)">
      <span class="oppia-editable-name">Answer:</span>
      <select ng-model="newTmpType" required>
        <option ng-selected="true">contains</option>
        <option>does not contain</option>
      </select>
      <input type="text" ng-model="newTmpCategory" placeholder="Add text" autofocus required>
      <input type="submit" value="Submit">
    </form>
  </div>

</div>
