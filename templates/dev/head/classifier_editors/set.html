<div class="classifier" ng-show="classifier=='set'" ng-controller="SetClassifierEditor">

  <div ng-repeat="action in states[stateId].dests" class="oppia-category-block">
    <a class="close" ng-click="deleteCategory($index)" ng-show="states[stateId]['dests'][$index].category != 'Default'">
      &times;
    </a>

    <p>
      <span class="oppia-editable-name">Answer:</span>
      <span ng-class="getCategoryClass(states[stateId]['dests'][$index].category)"
            ng-hide="activeInputData.name.indexOf(classifier + '.' + $index + '.category') == 0"
            ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category')">
        <[states[stateId]['dests'][$index].category]>
      </span>

      <div ng-show="activeInputData.name.indexOf(classifier + '.' + $index + '.category') == 0">
        <span ng-show="activeInputData.name == classifier + '.' + $index + '.category'">
          <a class="oppia-set-button oppia-set-button-extra"
             ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category.extra')">
          </a>
          <a class="oppia-set-button oppia-set-button-incomplete"
             ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category.incomplete')">
          </a>
          <a class="oppia-set-button oppia-set-button-equal"
             ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category.equal')">
          </a>
          <a class="oppia-set-button oppia-set-button-contains"
             ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category.contains')">
          </a>
          <a class="oppia-set-button oppia-set-button-excludes"
             ng-click="initializeNewActiveInput(classifier + '.' + $index + '.category.excludes')">
          </a>
          <button type="button" ng-click="hideCategoryInput()">Cancel</button>
        </span>

        <div ng-show="activeInputData.name.indexOf(classifier + '.' + $index + '.category.') == 0">
          <[getReadablePrefixFromActiveInput()]>
          <[$parent.tmpSet]>
          <ul>
            <li ng-repeat="tmpElement in $parent.tmpSet">
              <[tmpElement]>
              <button type="button" ng-click="$parent.tmpSet.splice($index, 1)">&times;</button>
            </li>
          </ul>

          <form ng-submit="addNewTmpElement()">
            <input type="text" ng-model="$parent.newTmpElement" placeholder="Add Element" autofocus required>
            <input type="submit" value="+">
          </form>

          <button type="button" ng-click="saveCategoryName($index, $parent.tmpSet)">Submit</button>
          <button type="button" ng-click="hideCategoryInput()">Cancel</button>
        </div>
      </div>
    </p>

    <span class="oppia-editable-name" ng-hide="activeInputData.name == classifier + '.' + $index + '.dest'"
          ng-click="initializeNewActiveInput(classifier + '.' + $index + '.dest')">
      <[getDestDescription(states[stateId]['dests'][$index].dest)]>
    </span>
    <span ng-show="activeInputData.name == classifier + '.' + $index + '.dest'">
      <form ng-submit="saveDest($index, newSetDestData)">
        Destination:
        <input type="text" size="40" list="destinations" ng-model="newSetDestData" placeholder="Type name of state, or '[Q' for questions" autofocus required>
        <datalist id="destinations">
          <option ng-repeat="(id, properties) in states" value="<[properties.desc]>"></option>
          <option ng-repeat="(id, properties) in questions" value="[Question] <[properties.desc]>"></option>
          <option value="END"></option>
        </datalist>
        <button type="button" ng-click="saveDest($index, newSetDestData)">Save</button>
      </form>
    </span>

    <p ng-click="showEditorModal('text', $index)">
      <span class="oppia-editable-name">Feedback:</span>
      <span ng-click="showEditorModal('text', $index)" ng-hide="action.text">[Add feedback]</span>
      <span ng-show="action.text" ng-bind-html="action.text | truncate"></span>
    </p>
  </div>

  <br>
  <button type="button" class="add-button" ng-click="initializeNewActiveInput(classifier + '.dummy.category')">Add new answer</button>
  <br><br>
  <div class="oppia-category-block" ng-show="activeInputData.name.indexOf(classifier + '.dummy.category') == 0">
    <a class="close" ng-click="hideCategoryInput()">&times;</a>
    <span ng-show="activeInputData.name == classifier + '.dummy.category'">
      <a class="oppia-set-button oppia-set-button-extra" ng-click="initializeNewActiveInput(classifier + '.dummy.category.extra')"></a>
      <a class="oppia-set-button oppia-set-button-incomplete" ng-click="initializeNewActiveInput(classifier + '.dummy.category.incomplete')"></a>
      <a class="oppia-set-button oppia-set-button-equal" ng-click="initializeNewActiveInput(classifier + '.dummy.category.equal')"></a>
      <a class="oppia-set-button oppia-set-button-contains" ng-click="initializeNewActiveInput(classifier + '.dummy.category.contains')"></a>
      <a class="oppia-set-button oppia-set-button-excludes" ng-click="initializeNewActiveInput(classifier + '.dummy.category.excludes')"></a>
    </span>

    <div ng-show="activeInputData.name.indexOf(classifier + '.dummy.category.') == 0">
      <[getReadablePrefixFromActiveInput()]>
      <[tmpSet]>
      <ul>
        <li ng-repeat="tmpElement in tmpSet">
          <[tmpElement]>
          <button type="button" ng-click="tmpSet.splice($index, 1)">&times;</button>
        </li>
      </ul>
      <form ng-submit="addNewTmpElement()">
        <input type="text" ng-model="newTmpElement" placeholder="Add Element" autofocus required>
        <input type="submit" value="+">
      </form>
      <button type="button" ng-click="addCategory(tmpSet)">Submit</button>
    </div>
  </div>
</div>
