{% extends "base.html" %}

{% block subtitle %}
  {{exploration_title}} (Statistics)
{% endblock subtitle %}

{% block content %}
  <div class="oppia-content">

    <h3>Statistics for '{{exploration_title}}'</h3>

    <h4>Completions</h4>
    {% if num_visits > 0 %}
      <div style="position: relative;">
      <table width=200 style="border: 1px solid black;">
        <tr height = 30>
          <td style="background-color:green;" width={{num_comp/num_visits * 200}}>
          </td>
          <td style="background-color:firebrick;" width={{200 -(num_comp/num_visits * 200)}}></td>
        </tr>
      </table>
      <br>
      <table height=20>
        <tr>
          <td width=20 style="background-color: green;"></td>
          <td>&nbsp; Number of completions: {{num_comp}}</td>
        </tr>
        <tr>
          <td width=20 style="background-color: firebrick;"></td>
          <td>&nbsp; Number of non-completions: {{num_visits - num_comp}}</td>
        </tr>
      </table>

      <div style="color: white; position: absolute; top: 5px; left: 5px; font-weight: bold;">
             {{(num_comp/num_visits * 100)| round(1)}}%
      </div>
    {% endif %}

    <h4>State-specific stats</h4>

    <table>
      <tr>
        <th class="oppia-stats-table">State name</th>
        <th class="oppia-stats-table">Times hit</th>
        <th class="oppia-stats-table">Answers in the default category</th>
      </tr>
      {% for state in state_stats %}
        <tr>
          <td class="oppia-stats-table">
            <a href="/create/{{exploration_id}}#/gui/{{state.id}}">
              {{state.name}}
            </a>
          </td>
          <td class="oppia-stats-table">
            {{state.count}}
          </td>
          <td class="oppia-stats-table">
            {% for answer in state.answers %}
              {{answer[0]}}
              (<em>{{answer[1]}} time{% if answer[1] > 1 %}s{% endif %}</em>)
              <br>
            {% endfor %}
          </td>
        </tr>
      {% endfor %}
    </table>

  </div>
{% endblock %}
