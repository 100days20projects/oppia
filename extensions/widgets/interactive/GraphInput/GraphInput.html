<style>
  .oppia-graph-input-viz-container {
    border: 1px solid black;
  }
</style>
<div>
  Input graph JSON: <input class='json-graph-input'>
  <button class="btn" ng-click="updateGraphFromInput()">Update Graph</button>
  <button class="btn" ng-click="updateTestGraph()">Use test graph</button>
  <div class='oppia-graph-input-viz-container'>
    <svg class='oppia-graph-svg' width="100%" height="350">
      <svg viewBox="0 0 50 350" width="100%" height="350" preserveAspectRatio="xMaxYMin meet">
        <rect ng-repeat="button in buttons"
          width="30"
          height="30"
          x="0"
          ng-attr-y="<[20 + 50*$index]>"
          rx="5"
          ry="5"
          ng-click="setMode(<[button]>)"
          ng-attr-style="fill: white; stroke: black; stroke-width: <[(currentMode==button)?3:1]>;">
        </rect>
      </svg>
      <line ng-if="addEdgeVertex!=null"
        ng-attr-x1="<[graph.vertices[addEdgeVertex].x]>"
        ng-attr-y1="<[graph.vertices[addEdgeVertex].y]>"
        ng-attr-x2="<[mouseX]>"
        ng-attr-y2="<[mouseY]>"
        style="stroke: black; stroke-width: 2;">
      </line>
      <line ng-repeat="edge in graph.edges"
        ng-attr-x1="<[graph.vertices[edge.src].x]>"
        ng-attr-y1="<[graph.vertices[edge.src].y]>"
        ng-attr-x2="<[graph.vertices[edge.dst].x]>"
        ng-attr-y2="<[graph.vertices[edge.dst].y]>"
        style="stroke: black; stroke-width: 2;">
      </line>
      <circle graph-input-vertex
        ng-repeat="vertex in graph.vertices" 
        ng-attr-cx="<[vertex.x]>"
        ng-attr-cy="<[vertex.y]>"
        ng-attr-index="<[$index]>"
        graph="graph"
        r="5">
      </circle>
    </svg>
  </div>
  <button class="btn btn-default" ng-click="submitGraph()">Submit</button>
  <span ng-show="errorMessage" style="color: red; margin-left: 30px;" aria-live="assertive">
    <[errorMessage]>
  </span>
</div>
