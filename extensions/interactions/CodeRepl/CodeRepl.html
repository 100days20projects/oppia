<style>
  .code-repl-input-box {
    border: 1px solid #ccc;
  }
  .code-repl-language {
    float: right;
    font-size: 0.8em;
    margin-top: 8px;
  }
  .code-repl-terminal {
    background-color: #222;
    color: white;
    font-weight: bold;
  }
  .code-repl-terminal-error {
    background-color: #222;
    color: red;
    font-weight: bold;
  }
  .cm-s-preview.CodeMirror {
    background-color: #eee;
  }
  .cm-s-preview .CodeMirror-code pre {
    background-color: #fff;
    width: 100%;
  }
  .cm-s-preview .CodeMirror-code .code-repl-noneditable-line {
    background-color: #eee;
    opacity: 0.8;
  }
  .cm-s-preview .cm-keyword {color: #708;}
  .cm-s-preview .cm-atom {color: #219;}
  .cm-s-preview .cm-number {color: #164;}
  .cm-s-preview .cm-def {color: #00f;}
  .cm-s-preview .cm-variable {color: black;}
  .cm-s-preview .cm-variable-2 {color: #05a;}
  .cm-s-preview .cm-variable-3 {color: #085;}
  .cm-s-preview .cm-property {color: black;}
  .cm-s-preview .cm-operator {color: black;}
  .cm-s-preview .cm-comment {color: #a50;}
  .cm-s-preview .cm-string {color: #a11;}
  .cm-s-preview .cm-string-2 {color: #f50;}
  .cm-s-preview .cm-meta {color: #555;}
  .cm-s-preview .cm-qualifier {color: #555;}
  .cm-s-preview .cm-builtin {color: #30a;}
  .cm-s-preview .cm-bracket {color: #997;}
  .cm-s-preview .cm-tag {color: #170;}
  .cm-s-preview .cm-attribute {color: #00c;}
  .cm-s-preview .cm-header {color: blue;}
  .cm-s-preview .cm-quote {color: #090;}
  .cm-s-preview .cm-hr {color: #999;}
  .cm-s-preview .cm-link {color: #00c;}
  .cm-s-preview .cm-error {color: #f00;}
</style>

<script type="text/ng-template" id="interaction/CodeRepl">
  <div>
    <form ng-submit="runCode(code)">
      <div class="code-repl-input-box">
        <div ui-codemirror="{onLoad: initCodeEditor}">
        </div>
      </div>
      <md-button type="submit" class="md-raised" ng-disabled="!hasLoaded">Run</md-button>
      <span class="code-repl-language">
        <em>Language: <[language]></em>
      </span>
    </form>
  </div>

  <hr>

  <div ng-if="fullError">
    <pre class="code-repl-terminal-error"><[fullError]></pre>
  </div>
  <div ng-if="!fullError">
    <pre ng-if="output" class="code-repl-terminal"><[output]></pre>
    <pre ng-if="!output" class="code-repl-terminal">[No terminal output]</pre>
  </div>
</script>

<script type="text/ng-template" id="response/CodeRepl">
  <div>
    <h5>Code</h5>
    <pre><[answer.code]></pre>

    <span ng-if="answer.output">
      <h5>Output</h5>
      <pre><[answer.output]></pre>
    </span>

    <span ng-if="answer.error" focus-on="<[errorFocusLabel]>">
      <font color=red>Error: <[answer.error]></font><br>
    </span>

    <span ng-if="answer.evaluation">
      &gt;&gt; <[answer.evaluation]>
    </span>
  </div>
</script>

<script type="text/ng-template" id="shortResponse/CodeRepl">
  <span><pre><[answer.code]></pre></span>

  <span ng-if="answer.output">
    <h5>Output</h5>
    <pre><[answer.output | truncateAtFirstLine]></pre>
  </span>

  <span ng-if="answer.error" focus-on="<[errorFocusLabel]>">
    <font color=red>Error: <[answer.error]></font><br>
  </span>
</script>
